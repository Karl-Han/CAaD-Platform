{% extends 'generics/base.html' %}

{% block content %}

{% if task.dockerfile %}

<table class="table">
<tr>
    <td>Name</td>
    <td>{{ task.dockerfile.name }}</td>
</tr>
<tr>
    <td>Status</td>
    <td>
    {% if task.dockerfile.status == 1 %}
    To be review
    {% elif task.dockerfile.status == 2 %}
    Reviewed
    {% else %}
    Image built
    {% endif %}
    </td>
</tr>
</table>

{% else %}

<form action="{% url 'dockers:dockerfile_upload' task.pk %}" method="post" enctype="multipart/form-data">
    {{ form.non_field_errors.as_ul }}
    {% csrf_token %}

    <table class="table">
        <tr>
            <td>
            {{ form.file.label_tag }}
            </td>
            <td>
            {{ form.file }}
            </td>
            <td>
            {{ form.file.errors }}
            </td>
        </tr>
        <tr>
            <td>
            {{ form.port_open.label_tag }}
            </td>
            <td>
            {{ form.port_open }}
            </td>
            <td>
            {{ form.port_open.errors }}
            </td>
        </tr>
    </table>
    <input type="submit" value="Submit" class="mt-3 offset-3">
</form>
{% endif %}


{% endblock content %}